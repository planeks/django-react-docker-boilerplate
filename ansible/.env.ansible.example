# ============================================================================
# Ansible Provisioning Environment Variables
# ============================================================================
# Copy this file to .env.ansible and fill in your values
# Usage: source .env.ansible before running provisioning scripts
#
# This file contains configuration for server provisioning and deployment
# See docs/infrastructure.md for detailed information
# ============================================================================

# ============================================================================
# Required Variables
# ============================================================================

# Domain Configuration
DOMAIN_NAME=example.com
SSL_EMAIL=admin@example.com

# Database Password (use a strong password!)
# Generate with: openssl rand -base64 32
DB_PASSWORD=changeme_secure_password

# ============================================================================
# Git Repository Configuration (Required for app deployment)
# ============================================================================
# For private repositories, Ansible will generate a deploy key
# Add the generated public key to your repository's deploy keys
GIT_REPO_URL=git@github.com:youruser/yourrepo.git
GIT_BRANCH=main

# ============================================================================
# GitHub Actions Integration
# ============================================================================
# 1. Generate SSH key for GitHub Actions:
#    ssh-keygen -t ed25519 -C "github-actions" -f ~/.ssh/github_actions
#
# 2. Add PUBLIC key here (for provisioning):
GITHUB_ACTIONS_SSH_KEY="ssh-ed25519 AAAA... github-actions"
#
# 3. Add to GitHub Secrets (Repository Settings > Secrets):
#    SSH_PRIVATE_KEY = contents of ~/.ssh/github_actions (private key)
#    PROD_HOST       = your server IP or domain

# ============================================================================
# Django Admin User (for initial setup)
# ============================================================================
DJANGO_ADMIN_USER=admin
DJANGO_ADMIN_PASSWORD=changeme_admin_password
DJANGO_ADMIN_EMAIL=admin@example.com
DJANGO_LOG_LEVEL=INFO

# ============================================================================
# Optional: Application Secrets
# If not set, .env file will contain placeholders for manual configuration
# ============================================================================

# Django Secret Key (generate with: python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())')
# DJANGO_SECRET_KEY=your-super-secret-key-here

# Email Configuration
# EMAIL_HOST=smtp.example.com
# EMAIL_PORT=587
# EMAIL_USER=noreply@example.com
# EMAIL_PASSWORD=email_password

# Sentry Error Tracking
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Celery Flower (Task Monitor)
# CELERY_FLOWER_USER=flower
# CELERY_FLOWER_PASSWORD=flower_password

# Caddy Web Server Password (generate hash with: caddy hash-password)
# CADDY_PASSWORD=$2a$14$hash...

# Frontend Dev Server
# VITE_DEV_SERVER_HOST=localhost

# ============================================================================
# Cloud Provider API Keys
# ============================================================================

# AWS Configuration (if using AWS)
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key

# DigitalOcean Configuration (if using DigitalOcean)
# Get your API token from: https://cloud.digitalocean.com/account/api/tokens
# Required for dynamic inventory to discover droplets
# DO_API_TOKEN=dop_v1_your_api_token_here

# ============================================================================
# Ansible Connection Configuration
# ============================================================================
# ANSIBLE_REMOTE_USER: User for SSH connection (who Ansible connects as)
#   - Use 'root' if connecting as root initially
#   - Use 'ubuntu' for AWS EC2 instances
#   - Use 'admin' for Google Cloud instances
#   - Use 'core' for CoreOS instances
# Default: ubuntu
ANSIBLE_REMOTE_USER=ubuntu

# APP_USER: Application user on the server (who owns application files)
#   - This is the non-root user that will own /home/{user}/projects
#   - Can be same as ANSIBLE_REMOTE_USER (e.g., 'ubuntu') or different (e.g., 'appuser')
#   - If connecting as root, you might want a separate app user like 'appuser'
# Default: ubuntu
APP_USER=ubuntu

# Common scenarios:
# - AWS EC2: ANSIBLE_REMOTE_USER=ubuntu, APP_USER=ubuntu (same user)
# - Root access: ANSIBLE_REMOTE_USER=root, APP_USER=appuser (separate users)
# - DigitalOcean: ANSIBLE_REMOTE_USER=root, APP_USER=ubuntu (separate users)

# ============================================================================
# Deployment Flags
# ============================================================================
# Set to 'true' to deploy application during provisioning
# DEPLOY_APP=false

# ============================================================================
# Example Usage
# ============================================================================
# 1. Copy this file: cp .env.ansible.example .env.ansible
# 2. Edit .env.ansible with your values
# 3. Source the file: source .env.ansible
# 4. Run provisioning: ./scripts/provision-server.sh aws production 192.168.1.100
